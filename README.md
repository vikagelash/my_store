მომხმარებლების მართვის ლოგიკა
ამ პროექტში მომხმარებლის მართვა და თითოეული ნაბიჯი სესიის მეშვეობით კონტროლდება. ანუ, როცა მომხმარებელი რეგისტრირდება, მის ID-ს ვამატებთ სესიაში და შემდეგ ამის მიხედვით ვარკვევთ, ვინ არის "შესული" მომხმარებელი.

 RegisterUserView - რეგისტრაცია
რეგისტრაციის გვერდი აჩვენებს ფორმას ახალი მომხმარებლისთვის.

GET მოთხოვნა უბრალოდ აჩვენებს ცარიელ ფორმას.

POST მოთხოვნა ამუშავებს მომხმარებლის მიერ შევსებულ მონაცემებს.
თუ ყველაფერი სწორად არის შევსებული:

ინფორმაცია ინახება ბაზაში.

მომხმარებელი არ იქნება ადმინისტრატორი (is_staff = False).

მისი ID ვაინახავთ სესიაში (request.session['user_id']), ანუ ვგავავთ, რომ შესულია.

და გადავამისამართებთ მის პროფილზე.

 UserProfileView - პროფილის ნახვა
ეს გვერდი აჩვენებს შესული მომხმარებლის პროფილს.

თუ ვიღაც ცდილობს სხვა მომხმარებლის პროფილის ნახვას, ავტომატურად ხდება გადამისამართება საკუთარ პროფილზე.

ინფორმაცია მოდის ბაზიდან და ფორმატირდება სერიალიზატორის საშუალებით (JSON-ის მსგავსი სტრუქტურა).

 UpdateUserView - მონაცემების შეცვლა
მომხმარებელი ხედავს ფორმას, სადაც შეუძლია შეცვალოს საკუთარი მონაცემები.

სერვისი ამოწმებს, ნამდვილად ის ცდილობს თუ არა საკუთარ პროფილში შესვლას.

წარმატებული ცვლილების შემდეგ პროფილზე ბრუნდება.

 DeleteUserView - პროფილის წაშლა
სანამ მომხმარებელი წაშლის საკუთარ ანგარიშს, პირველად უჩვენებს დადასტურების გვერდს.

შემდეგ, თუ დადასტურდა, წაშლის მის მონაცემებს და გაასუფთავებს სესიას (წაშლის ID-ს), რაც ნიშნავს, რომ "გადავიდა სისტემიდან".

ბოლოს გადამისამართება ხდება რეგისტრაციის გვერდზე.

 სესიის მეშვეობით ავტორიზაცია
ყველა ეს ოპერაცია ხდება სესიის ID-ის მიხედვით — ანუ თუ მომხმარებელი რეგისტრირდება, მის ID-ს ვინახავთ და შემდგომი ნაბიჯები ამ მონაცემით კონტროლდება.



პროდუქტების მართვის ლოგიკა
ამ ნაწილში გამოყენებულია Django-ის APIView-ები, რომლებიც საშუალებას გაძლევს მარტივად მართო პროდუქტის მონაცემები: შექმნა, ნახო, განაახლო ან წაშალო პროდუქტი. თითოეულ მოქმედებას თავისი ლოგიკა აქვს და აქვე აგიხსნი, როგორ მუშაობს.

 AddProductView – პროდუქტის დამატება
GET მოთხოვნა – თუ შესული ხარ როგორც ადმინისტრატორი (superuser), ნახავ პროდუქტის დამატების ფორმას.

POST მოთხოვნა – როცა ფორმას ავსებ და აგზავნი, პროდუქტი ინახება ბაზაში და ავტომატურად გადახვალ ახალი პროდუქტის დეტალების გვერდზე.

 მხოლოდ ადმინისტრატორებს აქვთ უფლება დაამატონ ახალი პროდუქტები. თუ სხვა მომხმარებელი სცდის ამ გვერდზე შესვლას, მიიღებს წვდომის აკრძალვის შეტყობინებას.

 ProductListView – პროდუქტის სია
GET მოთხოვნა – იღებს ყველა პროდუქტს და აჩვენებს პროდუქტის ჩამონათვალის გვერდზე.

ასევე, გადაეცემა ინფორმაცია მომხმარებელზეც, რაც საჭიროა შაბლონში გამოსატანად.

 ProductDetailView – დეტალური ინფორმაცია
GET მოთხოვნა – კონკრეტული პროდუქტის დეტალების ნახვა.

პროდუქტის უნიკალური ID (pk) გამოიძახება URL-იდან და მისი დეტალები იტვირთება გვერდზე.

 UpdateProductView – პროდუქტის განახლება
GET მოთხოვნა – აჩვენებს ფორმას, რომელშიც შეგიძლია შეცვალო პროდუქტის არსებული მონაცემები.

POST მოთხოვნა – ამოწმებს ფორმას, თუ სწორადაა შევსებული, შეინახავს განახლებულ მონაცემებს და გადაგიყვანს პროდუქტის დეტალების გვერდზე.

 მხოლოდ ადმინისტრატორს შეუძლია განაახლოს პროდუქტები.

 DeleteProductView – პროდუქტის წაშლა
GET მოთხოვნა – აჩვენებს წაშლის დადასტურების გვერდს.

POST მოთხოვნა – თუ ადასტურებ, პროდუქტი სრულად იშლება ბაზიდან და ბრუნდები პროდუქტების სიაზე.

პროდუქტის წაშლაც მხოლოდ ადმინისტრატორს შეუძლია.

 წვდომის კონტროლი
ყველა ოპერაცია, რომელიც დაკავშირებულია პროდუქტის დამატება/განახლება/წაშლასთან, დაცულია.
 მხოლოდ superuser-ად შესულ მომხმარებლებს აქვთ წვდომა ამ მოქმედებებზე.
თუ ჩვეულებრივი მომხმარებელი ცდილობს ამ გვერდებზე გადასვლას, სისტემაში მიიღებს შეტყობინებას, რომ არ აქვს ამის უფლება